# Simple service definitions for running the server in a local dev environment. This should
# not be used in production!

version: "2"

volumes:
  photo-data:

services:
  postgres:
    image: "postgres:12"
    environment:
      POSTGRES_DB: "seedbank"
      POSTGRES_PASSWORD: "seedbank"

  seedbank-server:
    image: "terraware/seedbank-server"
    ports:
      - "8080:8080"
    environment:
      DATABASE_URL: "jdbc:postgresql://postgres:5432/seedbank"
      DATABASE_PASSWORD: "seedbank"
      TERRAWARE_PHOTO_DIR: "/data/photos"
    volumes:
      - "photo-data:/data/photos"
    depends_on:
      - "postgres"
